#!/usr/bin/env perl

=head1 NAME

C<App::PickLE> - An electronic component pick list application.

=cut

package App::PickLE;

use strict;
use warnings;
use autodie;
use utf8;
use DDP;

# Include the project module directory.
use FindBin;
use File::Spec;
use lib File::Spec->catdir($FindBin::Bin, '..', 'lib');

use PickLE::Document;

# Program's main entry point.
sub main {
	# Enable UTF-8 output.
	binmode STDOUT, ":encoding(utf8)";

	# Load a pick list document.
	my $doc = PickLE::Document->load($ARGV[0]);

	# Go through categories listing the components in them.
	$doc->foreach_category(sub {
		my $category = shift;
		print "$category:\n";

		$doc->foreach_component({ category => $category }, sub {
			my $component = shift;

			# TODO: Make sure this is tabulated instead of just using TABs.
			print '  ';
			print (($component->picked) ? "\x{2611}" : "\x{2610}");
			print ' ' . $component->quantity . "\t";
			print $component->value . "\t" if defined $component->value;
			print $component->name . "\t";
			print $component->description if defined $component->description;
			print "\n";
		});

		print "\n";
	});

	return 0;
}

main();

=head1 AUTHOR

Nathan Campos <nathan@innoveworkshop.com>

=head1 COPYRIGHT

Copyright (c) 2022- Nathan Campos.

=cut
